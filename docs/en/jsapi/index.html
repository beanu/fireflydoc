<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS Bridge protocol | 链联金服文档</title>
    <meta name="description" content="链联金服文档网站">
    
    
    <link rel="preload" href="/doc/assets/css/0.styles.c4733d3e.css" as="style"><link rel="preload" href="/doc/assets/js/app.6e47452c.js" as="script"><link rel="preload" href="/doc/assets/js/8.990d811f.js" as="script"><link rel="prefetch" href="/doc/assets/js/10.c6e7b59c.js"><link rel="prefetch" href="/doc/assets/js/11.72f1f061.js"><link rel="prefetch" href="/doc/assets/js/12.45719a50.js"><link rel="prefetch" href="/doc/assets/js/13.f7f2f81f.js"><link rel="prefetch" href="/doc/assets/js/14.3b54b08e.js"><link rel="prefetch" href="/doc/assets/js/15.256b356e.js"><link rel="prefetch" href="/doc/assets/js/16.0d594eb8.js"><link rel="prefetch" href="/doc/assets/js/2.4e9e00cd.js"><link rel="prefetch" href="/doc/assets/js/3.8f45e87a.js"><link rel="prefetch" href="/doc/assets/js/4.0042efb4.js"><link rel="prefetch" href="/doc/assets/js/5.f1d22d45.js"><link rel="prefetch" href="/doc/assets/js/6.2b961207.js"><link rel="prefetch" href="/doc/assets/js/7.e66b7df7.js"><link rel="prefetch" href="/doc/assets/js/9.61ac3973.js">
    <link rel="stylesheet" href="/doc/assets/css/0.styles.c4733d3e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/doc/" class="home-link router-link-active"><!----> <span class="site-name">链联金服文档</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/doc/guide/" class="nav-link">指南</a></div><div class="nav-item"><a href="/doc/jsapi/" class="nav-link">JS API</a></div><div class="nav-item"><a href="/doc/urlschema/" class="nav-link">URL Schema</a></div><div class="nav-item"><a href="https://github.com/imloama/fireflywallet-api" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/doc/guide/" class="nav-link">指南</a></div><div class="nav-item"><a href="/doc/jsapi/" class="nav-link">JS API</a></div><div class="nav-item"><a href="/doc/urlschema/" class="nav-link">URL Schema</a></div><div class="nav-item"><a href="https://github.com/imloama/fireflywallet-api" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JS SDK
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <!----> </div> <div class="page"> <div class="content"><h2 id="js-bridge-protocol"><a href="#js-bridge-protocol" class="header-anchor">#</a> JS Bridge protocol</h2> <p>The native ablility that wallet offered to DAPP</p> <ul><li>cancel back recovery two apis</li></ul> <h2 id="import-via-npm"><a href="#import-via-npm" class="header-anchor">#</a> import via npm</h2> <ul><li>Via NPM or yarn, import<a href="https://github.com/fchainio/fireflywallet-api" target="_blank" rel="noopener noreferrer">fireflywallet-api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="all-api-function-description"><a href="#all-api-function-description" class="header-anchor">#</a> All API function description</h3> <table><thead><tr><th style="text-align:left">function name</th> <th style="text-align:left">parameters</th> <th style="text-align:left">description</th></tr></thead> <tbody><tr><td style="text-align:left">balances</td> <td style="text-align:left">callback:Function</td> <td style="text-align:left">return balance of current account</td></tr> <tr><td style="text-align:left">sign</td> <td style="text-align:left">data:Object,callback:Function</td> <td style="text-align:left">sign data in JSON format</td></tr> <tr><td style="text-align:left">pay</td> <td style="text-align:left">data:Object,callback:Function</td> <td style="text-align:left">payment, return hash value result</td></tr> <tr><td style="text-align:left">pathPayment</td> <td style="text-align:left">data:Object,callback:Function</td> <td style="text-align:left">pathpayment, return hash value result</td></tr> <tr><td style="text-align:left">trust</td> <td style="text-align:left">code:String,issuer:String,callback:Function</td> <td style="text-align:left">trust asset, return result</td></tr> <tr><td style="text-align:left">signXDR</td> <td style="text-align:left">data:String,callback:Function</td> <td style="text-align:left">sign XDR</td></tr> <tr><td style="text-align:left">scan</td> <td style="text-align:left">callback:Function</td> <td style="text-align:left">open qr code scan page</td></tr> <tr><td style="text-align:left">share</td> <td style="text-align:left">options:Object,callback:Function</td> <td style="text-align:left">share</td></tr> <tr><td style="text-align:left">openDApp</td> <td style="text-align:left">appid:String</td> <td style="text-align:left">open DAPP</td></tr> <tr><td style="text-align:left">initWindow</td> <td style="text-align:left">options:Object</td> <td style="text-align:left">initialize current window</td></tr></tbody></table> <h2 id="interface-description"><a href="#interface-description" class="header-anchor">#</a> Interface description</h2> <div class="language- extra-class"><pre class="language-text"><code>/**
 * Interface root object
 */
window.FFW = {

  /**
   * current wallet version number(added in v2.1.0)
   */
  version:'2.2.6',
  /**
   * current wallet OS, iOS or android(added in v2.1.0)
   */
  platform: 'ios',

  /**
   * attribute, String
   * public key address for current logged in account
   */
  address: 'GCENG5GLJ35GPJZQM3YJSFL3GMQ57MA5U6ZAAE6V4XIFVXFPY5MS5Q65',
  /**
   * attribute, Array
   * Contacts info
   * canceled since 2.4
   */
  contacts: [],

  /**
   * attribute, String
   * Address book
   * canceled since 2.4
   */
  myaddresses: [],
  
 /**
  * UUID encrypted
  */
  uuid = 'UUID encrypted',

 /**
  * locale of current wallet
  */
  locale = 'zh_cn';

   /**
   * acquire balance
   * @param callback: function type, expecting parameter response
   * {
   *   code: 'success or fail', 
   *   message: 'notification or error', 
   *   data: Array, data from balances attribute of account, check https://www.stellar.org/developers/horizon/reference/endpoints/accounts-single.html
   * }
   */
   balances(callback){
        //code
   };

  /**
   * payment method
   * @param {Object} data parameter
   *  data: {
   *    destination: 'reciever stellar address', 
   *    code: 'asset code', 
   *    issuer: 'asset issuer', 
   *    amount: 'amount, number', 
   *    memo_type: 'memo type, could be: NONE TEXT HASH ID RETURN', 
   *    memo: 'memo content'
   *  }
   * @param {string,function} callback function
   *      callback expects an object
   *        {
   *            code:'fail or success',
   *            message:'notification message',
   *            data:'result returned, object or null'
   *          }
   * Example:
   *   FFW.pay({
   *      destination: 'GBFGPA6MELXHEKWPJW75LOMC4CHGHTZ67LOWUGTUUILMXMZZGFLTO3X7', 
   *      code: 'XFF', 
   *      issuer: 'GAZEX2USUBMMWFRZFS77VDJYXUFLXI4ZGFPWX6TBNZCSTEQWNLFZMXFF', 
   *      amount: 100, 
   *      memo_type: 'TEXT', 
   *      memo: 'Hello,FFW'
   *    }, function(response){
   *        if(response.code === 'fail'){
   *          console.log('error:' + response.message)  
   *        }else{
   *          console.log('pay success')
   *        }
   *    })
   */
  pay(data, callback){
    // code
  },

  /**
   * pathpament method
   * @param {Object} data parameter
   *  data: {
   *    destination: 'reciever stellar address', 
   *    code: 'asset code', 
   *    issuer: 'asset issuer', 
   *    amount: 'amount, number', 
   *    memo_type: 'memo type, could be: NONE TEXT HASH ID RETURN', 
   *    memo: 'memo content'
   *  }
   * @param {string或function} callback
   *      callback expects an object
   *        {
   *            code:'fail or success',
   *            message:'notification message',
   *            data:'result returned, object or null'
   *          }
   * Example:
   *   FFW.pathPayment({
   *      destination: 'GBFGPA6MELXHEKWPJW75LOMC4CHGHTZ67LOWUGTUUILMXMZZGFLTO3X7', 
   *      code: 'XFF', 
   *      issuer: 'GAZEX2USUBMMWFRZFS77VDJYXUFLXI4ZGFPWX6TBNZCSTEQWNLFZMXFF', 
   *      amount: 100, 
   *      memo_type: 'TEXT', 
   *      memo: 'Hello,FFW'
   *    }, function(response){
   *        if(response.code === 'fail'){
   *          console.log('error:' + response.message)  
   *        }else{
   *          console.log('success')
   *        }
   *    })
   */
  pathPayment(data, callback){
    //code
  },

  /**
   * sign data to make backend application have confident that the operator has appropriate access to the account
   * @param {String} data to sign, JSON, then convert to String, which needs to keep order, otherwise verification will fail.
   * @param {string或function} callback
   *      callback expects an object
   *        {
   *            code:'fail or success',
   *            message:'notification message',
   *            data:'data returned, string, encoded in base64'
   *          }
   *    Example:
   *    let data = {name: 'firefly wallet dapp'}
   *    data = JSON.stringify(data)
   *    FFW.sign(data, function(response){
   *        if(response.code === 'fail'){
   *          console.log('error:' + response.message)  
   *        }else{
   *          console.log('do success')
   *          console.log('The result after signing {name: &quot;firefly wallet dapp&quot;} :'+response.data)
   *        }
   *    })
   */
  sign(data, callback){
    //code
  },

  /**
   * sign xdr for transaction
   * @param {string} data, xdr generated for transaction
   * @param {String} message
   * @param {string或function} callback
   *      callback expects an object
   *        {
   *            code:'fail or success',
   *            message:'notification message',
   *            data:'data returned, string, result xdr after signing it'
   *          }
   * Example:
   *   let xdr = 'AAAAAEpng8wi7nIqz02/1bmC4I5jzz763WoadKIWy7M5MVc3AAAAZACHjkkAAAABAAAAAAAAAAAAAAABAAAAAAAAAAoAAAALaG9tZV9kb21haW4AAAAAAQAAABBodHRwOi8vZmNoYWluLmlvAAAAAAAAAAA='
   *   FFW.signXDR(xdr, function(response){
   *        if(response.code === 'fail'){
   *          console.log('error:' + response.message)  
   *        }else{
   *          console.log('do success')
   *          console.log('XDR result after signing XDR :'+response.data)
   *        }
   *    })
   */
  signXDR(data, message, callback){
    // code
  },
  /**
   * canceled since 2.4
   * backup data, including contacts and address book
   * @param {string或function} callback
   *      callback expects an object
   *        {
   *            code:'fail or success',
   *            message:'notification message',
   *            data:'data returned, string, encrypted'
   *          }
   * Example:
   *   FFW.backup(function(response){
   *        if(response.code === 'fail'){
   *          console.log('error:' + response.message)  
   *        }else{
   *          console.log('do success')
   *          console.log('Backup data encrypted:'+response.data)
   *        }
   *    })
   */
  backup(callback){
    //code
  },

  /**
   * canceled since 2.4
   * recovery data, from data encrypted by backup function, overwrite to current wallet
   * @param {string} data 
   * @param {string或function} callback
   *      callback expects an object
   *        {
   *            code:'fail or success',
   *            message:'notification message'
   *          }
   * Example
   *   //notice, here is the backup data
   *   FFW.recovery(data,function(response){
   *        if(response.code === 'fail'){
   *          console.log('error:' + response.message)  
   *        }else{
   *          console.log('do success')
   *        }
   *    })
   */
  recovery(data, callback){
    //code
  },
  /**
   * Trust asset
   * @param {string} code
   * @param {string} issuer 
   * @param {string或function} callback
   *      callback expects an object
   *        {
   *            code:'fail or success',
   *            message:'notification message'
   *          }
   * Example:
   *   let code = 'XFF';
   *   let issuer = 'GAZEX2USUBMMWFRZFS77VDJYXUFLXI4ZGFPWX6TBNZCSTEQWNLFZMXFF';
   *   FFW.trust(code,issuer,function(response){
   *        if(response.code === 'fail'){
   *          console.log('error:' + response.message)  
   *        }else{
   *          console.log('do success')
   *        }
   *    })
   */
  trust(code, issuer, callback){
    //code
  }

 /**
  * Scan QR code to get result scanned.
  * Example:
  *   FFW.scan(function(response){
  *        if(response.code === 'fail'){
  *          console.log('error:' + response.message)  
  *        }else{
  *          console.log('scan result:' + response.data)//response.data is the scanning result, string
  *        }
  *    })
  */ 
  scan(callback){
   // code
  }

  /**
   * Share, implementation detail: https://github.com/EddyVerbruggen/SocialSharing-PhoneGap-PluginShare
   * @param {Object} options
   * @param {string或function} callback
   *      callback expects an object
   *        {
   *            code:'fail or success',
   *            message:'notification message'
   *          }
   * Example:
   *   let options = {
   *      message: 'Share picture',
   *      files: ['data:image/png;base64,iVBORw0......K5CYII='], //remote picture url or data in base64 format
   *     };
   *   FFW.share(options,function(response){
   *        if(response.code === 'fail'){
   *          console.log('error:' + response.message)  
   *        }else{
   *          console.log('share success')
   *        }
   *    })
   */
  share(options,callback){
    //code
  }

  /**
   * Open DAPP
   * @param {String} dappid of DAPP
   * 
   */
  openDApp(dappid){

  }

  /**
   * Initialize window
   * @param {Object} config
   * Example:
   * {
   *   &quot;navigationBarBackgroundColor&quot;:&quot;#ffffff&quot;, //String, background color of navigation bar
   *   &quot;navigationBarTextStyle&quot;:&quot;black or white&quot; //String, text color of navigation bar, black or white
   *    &quot;navigationBarTitleText&quot;:&quot;&quot;//String, title text of navigation bar
   *    &quot;themeStyle&quot;:&quot;&quot;//String, theme, dark or white
   *    &quot;navigationStyle&quot;:&quot;&quot; //String, Style of navigation bar, only support: default, custom, only reserve capsule button at upper right corner
   * }
   * 
   * @param {Function} callback 
   * 
   */
  initWindow(config, callback){
    //code
  };

}
</code></pre></div><h2 id="ethereum-dapps"><a href="#ethereum-dapps" class="header-anchor">#</a> Ethereum DApps</h2> <p>Firefly wallet v3.x currently support Ethereum and Stellar DApps.</p> <p>Firefly wallet DApp browser has the compatibility of Metamask, your DApp should naturally work with Firefly wallet if it is compatible with Metamask as well.</p> <p>The interaction between Firefly wallet DApp browser and DApp is base on <a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1102.md" target="_blank" rel="noopener noreferrer">EIP1102<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. DApp must implement <code>EIP1102</code> to get user account and send transaction.</p> <p>You can also check the related <a href="https://github.com/MetaMask/faq/blob/09281ac3dfcc19703f25fc9c960d2b7c65a0a4b3/DEVELOPERS.md#partly_sunny-web3---ethereum-browser-environment-check" target="_blank" rel="noopener noreferrer">documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> of metamask</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2019-12-27 17:18:29</span></div></div> <!----> </div> <!----></div></div>
    <script src="/doc/assets/js/app.6e47452c.js" defer></script><script src="/doc/assets/js/8.990d811f.js" defer></script>
  </body>
</html>
